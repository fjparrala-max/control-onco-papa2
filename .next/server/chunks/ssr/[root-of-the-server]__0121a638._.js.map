{"version":3,"sources":["../../../../lib/db.ts","../../../../pages/profesionales.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import Dexie, { Table } from \"dexie\";\r\nimport { Entry, Professional } from \"./types\";\r\n\r\nclass LocalDB extends Dexie {\r\n  entries!: Table<Entry, string>;\r\n  professionals!: Table<Professional, string>;\r\n\r\n  constructor() {\r\n    super(\"controlOncoPapa\");\r\n    this.version(1).stores({\r\n      entries: \"id, type, dateTime, status, professionalId\",\r\n      professionals: \"id, name, specialty\"\r\n    });\r\n  }\r\n}\r\n\r\nexport const localDB = new LocalDB();\r\n","import { useEffect, useMemo, useState } from \"react\";\r\nimport { localDB } from \"../lib/db\";\r\nimport type { Professional } from \"../lib/types\";\r\n\r\nfunction nowISO() {\r\n  return new Date().toISOString();\r\n}\r\n\r\nexport default function ProfesionalesPage() {\r\n  const [pros, setPros] = useState<Professional[]>([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [specialty, setSpecialty] = useState(\"\");\r\n  const [center, setCenter] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [notes, setNotes] = useState(\"\");\r\n\r\n  async function refresh() {\r\n    const p = await localDB.professionals.orderBy(\"name\").toArray();\r\n    setPros(p);\r\n  }\r\n\r\n  useEffect(() => {\r\n    refresh();\r\n  }, []);\r\n\r\n  const bySpecialty = useMemo(() => {\r\n    const map = new Map<string, number>();\r\n    for (const p of pros) {\r\n      map.set(p.specialty, (map.get(p.specialty) || 0) + 1);\r\n    }\r\n    return Array.from(map.entries()).sort((a, b) => a[0].localeCompare(b[0]));\r\n  }, [pros]);\r\n\r\n  async function addProfessional() {\r\n    if (!name.trim() || !specialty.trim()) {\r\n      alert(\"Falta Nombre y Especialidad\");\r\n      return;\r\n    }\r\n    const ts = nowISO();\r\n    const prof: Professional = {\r\n      id: crypto.randomUUID(),\r\n      name: name.trim(),\r\n      specialty: specialty.trim(),\r\n      center: center.trim() || undefined,\r\n      phone: phone.trim() || undefined,\r\n      notes: notes.trim() || undefined,\r\n      createdAt: ts,\r\n      updatedAt: ts\r\n    };\r\n    await localDB.professionals.put(prof);\r\n    setName(\"\");\r\n    setSpecialty(\"\");\r\n    setCenter(\"\");\r\n    setPhone(\"\");\r\n    setNotes(\"\");\r\n    await refresh();\r\n  }\r\n\r\n  async function deleteProfessional(id: string) {\r\n    const hasEntries = (await localDB.entries.where(\"professionalId\").equals(id).count()) > 0;\r\n    if (hasEntries) {\r\n      alert(\"Este profesional está asociado a registros. Primero quita/edita esos registros y luego elimina al profesional.\");\r\n      return;\r\n    }\r\n    if (!confirm(\"¿Eliminar este profesional?\")) return;\r\n    await localDB.professionals.delete(id);\r\n    await refresh();\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>Profesionales</h1>\r\n\r\n      <div className=\"card\" style={{ marginBottom: 12 }}>\r\n        <b>Agregar profesional</b>\r\n        <div style={{ marginTop: 10, display: \"grid\", gap: 10 }}>\r\n          <div className=\"row\">\r\n            <div style={{ flex: 1 }}>\r\n              <small>Nombre</small>\r\n              <input value={name} onChange={(e) => setName(e.target.value)} placeholder=\"Ej: Dr. Juan Pérez\" />\r\n            </div>\r\n            <div style={{ flex: 1 }}>\r\n              <small>Especialidad</small>\r\n              <input value={specialty} onChange={(e) => setSpecialty(e.target.value)} placeholder=\"Ej: Traumatología\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <div style={{ flex: 1 }}>\r\n              <small>Centro (opcional)</small>\r\n              <input value={center} onChange={(e) => setCenter(e.target.value)} placeholder=\"Ej: Clínica / Hospital\" />\r\n            </div>\r\n            <div style={{ flex: 1 }}>\r\n              <small>Teléfono (opcional)</small>\r\n              <input value={phone} onChange={(e) => setPhone(e.target.value)} placeholder=\"+56 9 ...\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <small>Notas (opcional)</small>\r\n            <textarea value={notes} onChange={(e) => setNotes(e.target.value)} rows={3} placeholder=\"Ej: Derivado por dolor cadera\" />\r\n          </div>\r\n\r\n          <button className=\"btn\" onClick={addProfessional}>Guardar profesional</button>\r\n          <small>Tip: puedes escribir cualquier especialidad (urología, oncología, traumatología, etc.).</small>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\" style={{ marginBottom: 12 }}>\r\n        <b>Resumen por especialidad</b>\r\n        <div style={{ marginTop: 10, display: \"grid\", gap: 6 }}>\r\n          {bySpecialty.length ? bySpecialty.map(([s, n]) => (\r\n            <div key={s}>{s}: <b>{n}</b></div>\r\n          )) : <small>Aún no hay profesionales.</small>}\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: \"grid\", gap: 10 }}>\r\n        {pros.map((p) => (\r\n          <div className=\"card\" key={p.id}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", gap: 10 }}>\r\n              <div>\r\n                <b>{p.name}</b>\r\n                <div><small>{p.specialty}</small></div>\r\n                {p.center && <div><small>Centro: {p.center}</small></div>}\r\n                {p.phone && <div><small>Tel: {p.phone}</small></div>}\r\n              </div>\r\n              <button className=\"btn2\" onClick={() => deleteProfessional(p.id)}>Eliminar</button>\r\n            </div>\r\n            {p.notes && <div style={{ marginTop: 8 }}>{p.notes}</div>}\r\n          </div>\r\n        ))}\r\n        {!pros.length && <div className=\"card\">Sin profesionales aún.</div>}\r\n      </div>\r\n\r\n      <div style={{ marginTop: 12 }}>\r\n        <a href=\"/\" className=\"btn2\" style={{ display: \"inline-block\", textDecoration: \"none\" }}>← Volver</a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"mJAAA,IAAA,EAAA,EAAA,CAAA,CAAA,uCAGA,OAAM,UAAgB,EAAA,OAAK,CACzB,OAA+B,CAC/B,aAA4C,AAE5C,cAAc,CACZ,KAAK,CAAC,mBACN,IAAI,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,CACrB,QAAS,6CACT,cAAe,qBACjB,EACF,CACF,CAEO,IAAM,EAAU,IAAI,4FChB3B,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,eAOe,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,EAAE,EAC7C,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAEnC,eAAe,IACb,IAAM,EAAI,MAAM,EAAA,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,OAAO,GAC7D,EAAQ,EACV,CAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,EAAE,EAEL,IAAM,EAAc,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC1B,IAAM,EAAM,IAAI,IAChB,IAAK,IAAM,KAAK,EACd,EAAI,CADgB,EACb,CAAC,EAAE,SAAS,CAAE,CAAC,EAAI,GAAG,CAAC,EAAE,SAAS,IAAK,CAAC,CAAI,GAErD,OAAO,MAAM,IAAI,CAAC,EAAI,OAAO,IAAI,IAAI,CAAC,CAAC,EAAG,IAAM,CAAC,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,EACzE,EAAG,CAAC,EAAK,EAET,eAAe,IACb,GAAI,CAAC,EAAK,IAAI,IAAM,CAAC,EAAU,IAAI,GAAI,YACrC,MAAM,+BAGR,IAAM,EAjCD,GAiCM,CAjCF,OAAO,WAAW,GAkCrB,EAAqB,CACzB,GAAI,OAAO,UAAU,GACrB,KAAM,EAAK,IAAI,GACf,UAAW,EAAU,IAAI,GACzB,OAAQ,EAAO,IAAI,SAAM,EACzB,MAAO,EAAM,IAAI,SAAM,EACvB,MAAO,EAAM,IAAI,SAAM,EACvB,UAAW,EACX,UAAW,CACb,CACA,OAAM,EAAA,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,GAChC,EAAQ,IACR,EAAa,IACb,EAAU,IACV,EAAS,IACT,EAAS,IACT,MAAM,GACR,CAEA,eAAe,EAAmB,CAAU,EACtB,AACpB,IAAI,EADsB,EAAA,OAAO,CAAC,AAClB,OADyB,CAAC,KAAK,CAAC,kBAAkB,MAAM,CAAC,GAAI,KAAK,GAAM,EAEtF,MAAM,kHAGH,QAAQ,gCAAgC,CAC7C,MAAM,EAAA,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,GACnC,MAAM,IACR,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,kBAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,aAAc,EAAG,YAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,wBACH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,GAAI,QAAS,OAAQ,IAAK,EAAG,YACpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,KAAM,CAAE,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAM,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,EAAG,YAAY,0BAE5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,KAAM,CAAE,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,iBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAW,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAAG,YAAY,4BAIxF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,KAAM,CAAE,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,sBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAQ,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,EAAG,YAAY,8BAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,KAAM,CAAE,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,wBACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAO,SAAW,AAAD,GAAO,EAAS,EAAE,MAAM,CAAC,KAAK,EAAG,YAAY,oBAIhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,qBACP,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,MAAO,EAAO,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EAAG,KAAM,EAAG,YAAY,qCAG1F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,MAAM,QAAS,WAAiB,wBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,kGAIX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,aAAc,EAAG,YAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,6BACH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,GAAI,QAAS,OAAQ,IAAK,CAAE,WAClD,EAAY,MAAM,CAAG,EAAY,GAAG,CAAC,CAAC,CAAC,EAAG,EAAE,GAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAa,EAAE,KAAE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,MAAZ,IACP,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAM,mCAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,EAAG,YACpC,EAAK,GAAG,CAAC,AAAC,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,IAAK,EAAG,YACtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,EAAE,IAAI,GACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAO,EAAE,SAAS,KACvB,EAAE,MAAM,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,WAAS,EAAE,MAAM,MACzC,EAAE,KAAK,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WAAM,QAAM,EAAE,KAAK,SAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,OAAO,QAAS,IAAM,EAAmB,EAAE,EAAE,WAAG,gBAEnE,EAAE,KAAK,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,CAAE,WAAI,EAAE,KAAK,KAVzB,EAAE,EAAE,GAahC,CAAC,EAAK,MAAM,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBAAO,8BAGzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,EAAG,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,IAAI,UAAU,OAAO,MAAO,CAAE,QAAS,eAAgB,eAAgB,MAAO,WAAG,iBAIjG,qGC5IA,IAAA,EAAiC,EAAA,CAAxBA,AAAwB,CAAA,MACjC,EAA0B,EAAyB,CAA1CC,AAA0C,CAAA,GAD1B,CAA0D,AAChC,EAEnD,EAAiC,AAFf,EAEe,CAAA,AAAxBC,AAHwB,CAGA,IAAnB,AAFY,EAK1B,EAA0B,EAAqB,CAAA,CAHzB,AAGyB,EAAnCC,IACZ,EAAqC,EAAA,CAAA,CAAA,AAJJ,EAIrBC,EADc,EAI1B,EAAwC,EAAA,CAHnB,AAGmB,CAAA,EAA5BC,IACZ,EAA2B,EAAA,CAAA,AAAlBC,CAAkB,IAJU,AAGX,IACiD,CAAxD,QAAQ,EADa,8BAIzBJ,EAAAA,KAAAA,EAAMG,EAAU,WAAU,AAG5BE,EAAAA,CAAAA,EAAiBL,EAAAA,KAAAA,EAAMG,EAAU,kBAAiB,AAClDG,EAAAA,CAAAA,EAAiBN,EAAAA,KAAAA,EAAMG,EAAU,kBAAiB,AAClDI,EAAAA,CAAAA,EAAqBP,EAAAA,KAAAA,EAAMG,EAAU,sBAAqB,AAC1DK,EAAAA,CAAAA,EAASR,EAAAA,KAAAA,EAAMG,EAAU,UACzBM,AADkC,EAClCA,CAAAA,EAAkBT,EAAAA,KAAAA,EAAMG,EAAU,mBAAkB,AAGpDO,EAAAA,CAAAA,EAA0BV,EAAAA,KAAAA,EACrCG,EACA,2BACD,AACYQ,EAAAA,CAAAA,EAA0BX,EAAAA,KAAAA,EACrCG,EACA,2BAEWS,AADZ,EACYA,CAAAA,EAA2BZ,EAAAA,KAAAA,EACtCG,EACA,4BACD,AACYU,EAAAA,CAAAA,EAA0Bb,EAAAA,KAAAA,EACrCG,EACA,2BACD,AACYW,EAAAA,CAAAA,EAA8Bd,EAAAA,KAAAA,EACzCG,EACA,+BACD,AAGYY,EAAc,IAAIjB,EAAAA,gBAAAA,CAAiB,CAC9CkB,WAAY,CACVC,KAAMlB,EAAAA,SAAAA,CAAUmB,KAAK,CACrBC,KAAM,iBACNC,SAAU,iBAEVC,WAAY,GACZC,SAAU,EACZ,EACAC,QAAqBG,CAAZF,EAAoC,KAC7CG,CADiBF,GAAG,AAA6B,CAA5BC,cAC0C,CAA3CF,EACpBK,MAD4BJ,GAAG,CAACG,CACpB,CAEVE,IAAK5B,EAAI6B,EAAAA,KAAO,CAChBC,SAAU/B,EAAS8B,AAJsC,OAItCA,AAAO,AAC5B,WACA5B,CACF,GAAE,AAEW8B,EAAAA,CAAAA,EAAU7B,EAAAA,UAAAA,EAAW,CAChC8B,QAAS,wBACT1B,WACAL,cACAY,EACAT,gCACAD,qBACAE,CACF,GAAE","ignoreList":[2]}