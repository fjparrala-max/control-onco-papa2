module.exports=[1044,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(7669),f=a.i(1910),g=a.i(6560),h=a.i(1587),i=a.i(5302),j=b([g,h,i]);function k(){let a=(0,f.useRouter)(),[b,c]=(0,e.useState)(null),[j,k]=(0,e.useState)([]),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(!0);async function p(a){let b=(await (0,i.getDocs)((0,i.collection)(g.db,"caseMembers",a,"cases"))).docs.map(a=>a.id),c=[];for(let a of b){let b=await (0,i.getDoc)((0,i.doc)(g.db,"cases",a));if(b.exists()){let a=b.data();c.push({id:b.id,name:a.name,createdBy:a.createdBy,members:a.members||{}})}}k(c)}async function q(){if(!b)return;if(!l.trim())return alert("Pon un nombre, ej: Papá Sergio");let a=await (0,i.addDoc)((0,i.collection)(g.db,"cases"),{name:l.trim(),createdBy:b,members:{[b]:"admin"},createdAt:(0,i.serverTimestamp)()});await (0,i.setDoc)((0,i.doc)(g.db,"caseMembers",b,"cases",a.id),{role:"admin",addedAt:(0,i.serverTimestamp)()}),m(""),await p(b)}async function r(b){localStorage.setItem("activeCaseId",b),a.push("/")}async function s(){await (0,h.signOut)(g.auth),a.replace("/login")}return((0,e.useEffect)(()=>{let b=(0,h.onAuthStateChanged)(g.auth,async b=>{b?(c(b.uid),o(!0),await p(b.uid),o(!1)):a.replace("/login")});return()=>b()},[a]),n)?(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"card",children:"Cargando…"})}):(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("h1",{children:"Casos"}),(0,d.jsxs)("div",{className:"card",style:{marginBottom:12},children:[(0,d.jsx)("b",{children:"Crear caso compartido"}),(0,d.jsxs)("div",{style:{marginTop:10,display:"grid",gap:10},children:[(0,d.jsx)("input",{value:l,onChange:a=>m(a.target.value),placeholder:"Ej: Papá Sergio"}),(0,d.jsx)("button",{className:"btn",onClick:q,children:"Crear"}),(0,d.jsx)("small",{children:"Luego invitaremos familiares (próximo paso)."})]})]}),(0,d.jsxs)("div",{style:{display:"grid",gap:10},children:[j.map(a=>(0,d.jsx)("div",{className:"card",children:(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:a.name}),(0,d.jsx)("div",{children:(0,d.jsxs)("small",{children:["ID: ",a.id]})}),null===a.id&&(0,d.jsx)("div",{children:(0,d.jsx)("small",{children:(0,d.jsx)("b",{children:"Activo"})})})]}),(0,d.jsx)("button",{className:"btn2",onClick:()=>r(a.id),children:"Abrir"})]})},a.id)),!j.length&&(0,d.jsx)("div",{className:"card",children:"No tienes casos aún."})]}),(0,d.jsx)("div",{style:{marginTop:12},className:"row",children:(0,d.jsx)("button",{className:"btn2",onClick:s,children:"Cerrar sesión"})})]})}[g,h,i]=j.then?(await j)():j,a.s(["default",()=>k]),c()}catch(a){c(a)}},!1),333,a=>a.a(async(b,c)=>{try{var d=a.i(9168),e=a.i(7068),f=a.i(2759),g=a.i(3590),h=a.i(7298),i=a.i(1044),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/casos",pathname:"/casos",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/casos",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_bfe60431._.js.map